{{ define "index" }}

<!DOCTYPE html>
<html lang="en">

{{ template "header" }}

<body>

    <div class="navbar navbar-expand-md navbar-dark bg-dark">
    	<a href="#menu-toggle" class="btn btn-info" id="menu-toggle">
      		<span class="navbar-toggler-icon"></span>
    	</a> 
    </div>
    <div id="wrapper">
        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="https://github.com/s8sg/faas-flow">
                        Faas-Flow
                    </a>
                </li>

		{{range .Functions}}
                <li>
			<a href="#" name="function-switch" id="{{.Name}}">{{.Name}}</a>
                </li>
		{{ end }}

            </ul>
        </div>
        <!-- /#sidebar-wrapper -->
	<!-- Welcome Page -->
        <div id="welcome">
            <div class="container-fluid">
                <h1>Faas-Flow Dashboard</h1>
		<div>
		    <p>Faas-flow Dashboard provides a visual representation of the flow functions that are depoloyed on the <a href="https://www.openfaas.com/">openfaas</a>.</p>
		    <p>In order to browse flow function via this dashboard, make sure to add <code>faas-flow : 1</code> at <code>labels</code> to all flow function</p>
		    <p>For more details visit <a href="https://github.com/s8sg/faas-flow-dashboard/blob/master/README.md">here</a></p>
		</div>

            </div>
        </div>

        <!-- Page Content -->
        <div id="page-content-wrapper" style="visibility: hidden">
            <div class="card border border-dark" style="width: 70vw;">
		<div id="graph" style="width: 69.85vw; height: 30vh; overflow: hidden;" align="center" class="border border-secondary rounded card-img-top"> </div>
		<div class="card-body bg-light">
                   <h2 id="flow-name" class="card-title">Flow Name</h1>
		   <p id="flow-desc" class="card-text">
		   Flow Description
		   </p>
		</div>
		<ul class="list-group list-group-flush">
    		   <li class="list-group-item" id="exec-count">Execution Count: </li>
                   <li class="list-group-item" id="replica-count">Replicas: </li>
                </ul>
		<div class="card-body">
    		   <a id="link" href="#" class="card-link btn btn-info">Execute</a>
  		</div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- Bootstrap core JavaScript    --> 
    <script type="text/javascript" src="faas-flow-dashboard?file=vendor/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="faas-flow-dashboard?file=vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Menu Toggle Script -->
    <script>
    	$("#menu-toggle").click(function(elem) {
        	elem.preventDefault();
        	$("#wrapper").toggleClass("toggled");
    	});
    </script>

    <!-- PublicURL override -->
    <script>
	  var serverAddr={{ .PublicURL }};
    </script>

    <!-- Function Toggle Script -->
    <script type="text/javascript" src="faas-flow-dashboard?file=js/main.js"></script> 

    <!-- graphviz library -->
    <script src="//d3js.org/d3.v4.min.js"></script>
    <script src="https://unpkg.com/viz.js@1.8.0/viz.js" type="javascript/worker"></script>
    <script src="https://unpkg.com/d3-graphviz@1.4.0/build/d3-graphviz.min.js"></script>

</body>

</html>

{{ end }}
